spring.application.name=api-gateway
server.port=8084

# Eureka Client Configuration
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/

# Download the list of all registered microservices from Eureka so it knows where to route traffic
eureka.client.fetch-registry=true  

# Registers the Gateway itself as a service inside Eureka
eureka.client.register-with-eureka=true
eureka.client.registry-fetch-interval-seconds=5
eureka.client.initial-instance-info-replication-interval-seconds=3
eureka.instance.prefer-ip-address=true
eureka.instance.lease-renewal-interval-in-seconds=30
eureka.instance.lease-expiration-duration-in-seconds=90
eureka.instance.hostname=localhost

# Instead of asking Eureka for a service's location on every single request, the load balancer remembers the locations for 35 seconds, which significantly improves performance.
spring.cloud.loadbalancer.cache.enabled=true
spring.cloud.loadbalancer.cache.ttl=35s

# Gateway Routes
spring.cloud.gateway.routes[0].id=journal-service
spring.cloud.gateway.routes[0].uri=lb://journal-service
spring.cloud.gateway.routes[0].predicates[0]=Path=/journals/**

# Route to routine-service using Eureka service discovery with load balancing
spring.cloud.gateway.routes[1].id=routine-service
spring.cloud.gateway.routes[1].uri=lb://routine-service
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/routines/**

# Logging for debugging
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springframework.cloud.loadbalancer=DEBUG
logging.level.com.netflix.eureka=DEBUG
logging.level.com.netflix.discovery=DEBUG